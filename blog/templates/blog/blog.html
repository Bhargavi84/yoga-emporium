{% extends "base.html" %}
{% load static %}

{% block page_header %}
<div class="container header-container">
  <div class="row">
    <div class="col"> </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="overlay"></div>
<div class="container mb-2">
  <div class="row">
    <div class="col">
      <hr>
      <h2 class="logo-font mb-4">Blogs</h2>
      <hr>
    </div>
  </div>
  <div class="row">
    <div class=" col-md-8 col-md-10 mx-auto">
      <div class="site-heading">
        <h3 class="site-heading my-4 mt-3 text-black"> Welcome to our blog section </h3>
        <p class="text-dark">We would really like to hear from you.
        </p>
      </div>
    </div>
  </div>


{% for comment in comments %}
<div class="comments" style="padding: 10px;">
  <p class="font-weight-bold">
    {{ comment.name }}
    <span class=" text-muted font-weight-normal">
      {{ comment.created_on }}
    </span>
  </p>
  {{ comment.body | linebreaks }}
</div>
{% endfor %}


<div class="col-md-8 card mb-4  mt-3 ">

  <!-- comments -->
  <h2>{{ comments.count }} comments</h2>

  <div class="card-body">
    {% if new_comment %}
    <div class="alert alert-success" role="alert">
      Your comment is awaiting moderation
    </div>
    {% else %}
    <!-- Blog Entries Column -->
  <div class="col-md-8 mt-3 left">
    {% load crispy_forms_tags %}
    <h3>Leave a comment</h3>
    <form method="post" style="margin-top: 1.3em;">
      {{ comment_form.as_p }}
      {% csrf_token %}
      <button type="submit" class="btn btn-primary  btn-lg">Submit</button>
    </form>
    {% endif %}
  </div>
  
    {% for post in post_list %}
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title">{{ post.title }}</h2>
        <p class="card-text text-muted h6">{{ post.author }} | {{ post.created_on}} </p>
        <p class="card-text">{{post.content|slice:":200" }}</p>
        <a href="{% url 'post_detail' post.slug  %}" class="btn btn-primary">Read More &rarr;</a>
      </div>

    </div>
    {% endfor %}
  </div>
</form>
</div>
  {% endblock %}